except Exception as e:
                print("Xatolik Telegramga yuborishda:", e)

# --- Rahmat tizimi ---
async def handle_thanks(update, context):
    user_id = update.effective_user.id
    count = THANKS_COUNTER.get(user_id, 0) + 1
    THANKS_COUNTER[user_id] = count
    reply = "ðŸ¤— Sizga doimo salomatlik va muvaffaqiyat tilaymiz!" if count == 1 else "ðŸ˜… Qaytarormen!"
    await update.message.reply_text(reply)

# --- Bot ishga tushishi ---
async def main():
    app = ApplicationBuilder().token(BOT_TOKEN).build()

    # Rahmat xabarlarini tinglash
    thanks_words = ["rahmat", "raxmat", "raxmad", "rahmad", "Ñ€Ð°Ñ…Ð¼Ð°Ð´", "Ñ€Ð°Ð¼Ð°Ñ‚"]
    app.add_handler(MessageHandler(filters.TEXT & filters.Regex("|".join(thanks_words)), handle_thanks))

    # Doimiy ishga tushirish
    while True:
        await send_birthday(app)
        await asyncio.sleep(60)  # har daqiqa tekshiradi

if name == "__main__":
    asyncio.run(main())
